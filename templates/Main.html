<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Стоматологическая клиника Зубибиби{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>
    <header>
        <div class="header-container">
            <div class="clinic-selector">
                {% for clinic in all_clinics %}
                <a href="{{ url_for('clinic_home', clinic_slug=clinic.slug) }}"
                   class="clinic-btn {% if current_clinic.id == clinic.id %}active{% endif %}">
                    {{ clinic.name }}
                </a>
                {% endfor %}
            </div>
        </div>
        <h1 align="center">Стоматологическая клиника</h1>
        <h1 align="center">Зубибиби - {{ current_clinic.name }}</h1>
    </header>
    <div class="header-container">
        <nav class="main-nav">
            <a href="{{ url_for('clinic_home', clinic_slug=current_clinic.slug) }}">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house" viewBox="0 0 16 16">
                    <path d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L2 8.207V13.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5V8.207l.646.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293zM13 7.207V13.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V7.207l5-5z"/>
                </svg>
            </a>
            <a href="{{ url_for('about_clinic', clinic_slug=current_clinic.slug) }}">О клинике </a> |
            <a href="{{ url_for('services', clinic_slug=current_clinic.slug) }}">Услуги</a> |
            <a href="{{ url_for('doctors', clinic_slug=current_clinic.slug) }}">Врачи </a> |
            <a href="{{ url_for('reviews', clinic_slug=current_clinic.slug) }}">Отзывы </a> |
            <a href="{{ url_for('price', clinic_slug=current_clinic.slug) }}">Цены </a> |
            <a href="{{ url_for('account', clinic_slug=current_clinic.slug) }}">Личный кабинет </a> |
            <a href="{{ url_for('admin_dashboard', clinic_slug=current_clinic.slug) }}">Админка </a>|
            {% if current_user.is_authenticated %}
            <a href="{{ url_for('logout') }}">Выйти </a> |
            {% else %}
            <a href="{{ url_for('login') }}">Войти</a> |
            {% endif %}
            {% if current_user.is_authenticated and current_user.role in ['doctor', 'employee', 'staff'] %}
            <a href="{{ url_for('doctor_dashboard', clinic_slug=current_clinic.slug) }}">Панель врача</a> |
            {% endif %}
        </nav>
    </div>
        <div class="container mt-3">
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for category, message in messages %}
                        <div class="alert alert-{{ 'danger' if category == 'error' else 'success' }}
                                    alert-dismissible fade show" role="alert">

                            {% if category == 'error' and 'обязательные поля' in message|lower %}
                                <h6 class="alert-heading">⚠️ Заполните обязательные поля</h6>
                                <p>{{ message }}</p>
                                <hr>
                                <p class="mb-0 small">
                                    <strong>Совет:</strong> Поля, отмеченные <span class="text-danger">*</span>, обязательны для заполнения.
                                </p>

                            {% elif category == 'error' and 'не может быть пустым' in message|lower %}
                                <h6 class="alert-heading">⚠️ Обязательное поле</h6>
                                <p>{{ message }}</p>
                                <hr>
                                <p class="mb-0 small">
                                    Это поле требует значения. Пожалуйста, заполните его.
                                </p>

                            {% else %}
                                {{ message }}
                            {% endif %}

                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                    {% endfor %}
                {% endif %}
            {% endwith %}
        </div>

    <main class="content">
        {% block content %}

        {% endblock %}
    </main>
    <footer>
        <div class="footer-container">
            <p>&copy; 2025 Стоматологическая клиника "Зубибиби". Все права защищены.</p>
        </div>
    </footer>
    <script src="{{ url_for('static', filename='js/bootstrap.bundle.min.js') }}"></script>
</body>
</html>