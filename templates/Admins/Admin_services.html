
{% extends "Main.html" %}

{% block title %}Админка - {{ super() }}{% endblock %}
{% block content %}



<div class="container">
    <h2>Управление: {{ table_name }}</h2>


    <div class="card mb-4">
        <div class="card-header">
            <h5 class="mb-0">Добавить новую запись</h5>
        </div>
        <div class="card-body">
            <form method="POST" action="/Admin/add/{{ table_name }}" class="row g-3">
                {% for column in columns %}
                    {% if column != 'id' %}
                    <div class="col-md-4">
                        <label class="form-label small">{{ column }}</label>

                        {% if column == 'is_active' or column.endswith('_active') %}
                            <input type="checkbox" name="{{ column }}" value="true" class="form-check-input">

                        {% elif 'price' in column or 'cost' in column %}
                            <input type="number" name="{{ column }}" step="0.01"
                                   class="form-control form-control-sm" placeholder="0.00">

                        {% elif 'description' in column or 'notes' in column %}
                            <textarea name="{{ column }}" class="form-control form-control-sm"
                                      rows="2" placeholder="{{ column }}"></textarea>

                        {% else %}
                            <input type="text" name="{{ column }}"
                                   class="form-control form-control-sm" placeholder="{{ column }}">
                        {% endif %}
                    </div>
                    {% endif %}
                {% endfor %}
                <div class="col-12">
                    <button type="submit" class="btn btn-success btn-sm">Добавить</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Таблица для просмотра и редактирования -->
    <div class="table-responsive">
        <table class="table table-striped table-bordered table-hover">
            <thead class="table-dark">
                <tr>
                    {% for column in columns %}
                    <th>{{ column }}</th>
                    {% endfor %}
                    <th>Действия</th>
                </tr>
            </thead>
            <tbody>
                {% for row in data %}
                <tr>
                    <form method="POST" action="/Admins/Admin_services/update/{{ table_name }}/{{ row.id }}">
                    {% for column in columns %}
                    <td>
                        {% if column == 'id' %}
                            <strong>{{ row[column] }}</strong>
                        {% else %}
                            {% if column == 'is_active' or column.endswith('_active') %}
                                <input type="checkbox" name="{{ column }}"
                                       {% if row[column] %}checked{% endif %}
                                       class="form-check-input">

                            {% elif 'price' in column or 'cost' in column %}
                                <input type="number" name="{{ column }}" value="{{ row[column] }}"
                                       step="0.01" class="form-control form-control-sm">

                            {% elif 'description' in column or 'notes' in column %}
                                <textarea name="{{ column }}" class="form-control form-control-sm"
                                          rows="2">{{ row[column] }}</textarea>

                            {% else %}
                                <input type="text" name="{{ column }}" value="{{ row[column] }}"
                                       class="form-control form-control-sm">
                            {% endif %}
                        {% endif %}
                    </td>
                    {% endfor %}
                    <td>
                        <button type="submit" class="btn btn-primary btn-sm">Сохранить</button>
                        </form>

                        <form method="POST" action="/Admin/delete/{{ table_name }}/{{ row.id }}"
                              onsubmit="return confirm('Удалить запись?')" class="d-inline mt-1">
                            <button type="submit" class="btn btn-danger btn-sm">Удалить</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>










<!--&lt;!&ndash;<table class="table">

        <tr>
            <th scope="col">ID</th>
            <th scope="col">Услуга</th>
            <th scope="col">Цена</th>
            <th scope="col">Описание</th>
            <th scope="col">Активность</th>
            <th scope="col">Длительность услуги</th>
        </tr>
        {% for service in services %}
    <tr>
        <td>{{ service.id }}</td>
        <form method="POST" action="/Admins/Admin_services/update/{{ service.id }}">
        <td>
            <input type="text" name="name" value="{{ service.name }}">
        </td>
        <td><input type="number" name="price" value="{{ service.price }}" step="0.01"></td>
        <td><input type="text" name="description" value="{{ service.description }}"></td>
        <td><input type="checkbox" name="is_active" {% if service.is_active %}checked{% endif %}></td>
        <td><input type="text" name="duration_minutes" value="{{ service.duration_minutes }}"></td>
        <td>
            <button type="submit">Сохранить</button>
            </form>
        </td>
    </tr>
    {% endfor %}

</table>
-&ndash;&gt;
<div class="container">
    <h2>Управление: {{ table_name }}</h2>
    <table class="table table-striped">
        <form method="POST" action="/Admin/add/{{ table_name }}">

                {% for column in columns %}
                    {% if column != 'id' %}
                    <td>

                        {% if column == 'is_active' or column.endswith('_active') %}
                            <input type="checkbox" name="{{ column }}" value="true" class="form-control form-control-sm">

                        {% elif 'price' in column or 'cost' in column %}
                            <input type="number" name="{{ column }}" step="0.01" class="form-control form-control-sm">

                        {% elif 'description' in column or 'notes' in column %}
                            <textarea name="{{ column }}" class="form-control form-control-sm" rows="2"></textarea>

                        {% else %}
                            <input type="text" name="{{ column }}" class="form-control form-control-sm" >
                        {% endif %}
                    </td>
                    {% endif %}
                {% endfor %}
            <td>
                <button type="submit" class="btn btn-primary">Добавить</button>
            </td>
        </form>
    </table>

    <table class="table table-striped">
        <thead>
            <tr>
                {% for column in columns %}
                <th>{{ column }}</th>
                {% endfor %}
                <th>Действия</th>
            </tr>
        </thead>
        <tbody>

            {% for row in data %}
            <tr>
                <td>{{ row.id }}</td>
                <form method="POST" action="/Admin/update/{{ table_name }}/{{ row.id }}">
                {% for column in columns %}
                    {% if column != 'id' %}
                    <td>
                        {% if column == 'is_active' or column.endswith('_active') %}
                            <input type="checkbox" name="{{ column }}"
                                   {% if row[column] %}checked{% endif %}>

                        {% elif 'price' in column or 'cost' in column %}
                            <input type="number" name="{{ column }}" value="{{ row[column] }}"
                                   step="0.01" class="form-control form-control-sm">

                        {% elif 'description' in column or 'notes' in column %}
                            <textarea name="{{ column }}" class="form-control form-control-sm"
                                      rows="2">{{ row[column] }}</textarea>

                        {% else %}
                            <input type="text" name="{{ column }}" value="{{ row[column] }}"
                                   class="form-control form-control-sm">
                        {% endif %}
                    </td>
                    {% endif %}
                {% endfor %}
                <td>
                    <button type="submit" class="btn btn-primary">Сохранить</button>
                    </form>
                </td>

            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>-->

{% endblock %}





